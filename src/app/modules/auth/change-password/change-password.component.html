<div class="container">
  <h2 class="title">{{ 'CHANGE_PASSWORD.TITLE' | translate }}</h2>

  <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label>{{ 'CHANGE_PASSWORD.OLD_LABEL' | translate }}</label>
      <input type="password" formControlName="oldPassword" [placeholder]="'CHANGE_PASSWORD.OLD_PLACEHOLDER' | translate" />
      <div *ngIf="submitted && f['oldPassword'].errors" class="error">
        {{ 'CHANGE_PASSWORD.OLD_REQUIRED' | translate }}
      </div>
    </div>

    <div class="form-group">
      <label>{{ 'CHANGE_PASSWORD.NEW_LABEL' | translate }}</label>
      <input type="password" formControlName="newPassword" [placeholder]="'CHANGE_PASSWORD.NEW_PLACEHOLDER' | translate" />
      <div *ngIf="submitted && f['newPassword'].errors" class="error">
        <div *ngIf="f['newPassword'].errors['required']">{{ 'CHANGE_PASSWORD.NEW_REQUIRED' | translate }}</div>
        <div *ngIf="f['newPassword'].errors['minlength']">{{ 'CHANGE_PASSWORD.NEW_MIN' | translate }}</div>
      </div>
    </div>

    <div class="form-group">
      <label>{{ 'CHANGE_PASSWORD.CONFIRM_LABEL' | translate }}</label>
      <input type="password" formControlName="confirmPassword" [placeholder]="'CHANGE_PASSWORD.CONFIRM_PLACEHOLDER' | translate" />
      <div *ngIf="submitted && f['confirmPassword'].errors" class="error">
        {{ 'CHANGE_PASSWORD.CONFIRM_REQUIRED' | translate }}
      </div>
      <div *ngIf="submitted && changePasswordForm.errors?.['mismatch']" class="error">
        {{ 'CHANGE_PASSWORD.MISMATCH' | translate }}
      </div>
    </div>

    <button type="submit" class="btn-submit">
      <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
      {{ 'CHANGE_PASSWORD.SUBMIT' | translate }}
    </button>

    <div class="toast-container position-fixed bottom-0 end-0 p-3">
      <div id="loginToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header bg-color-pr text-white">
          <i class="fas fa-info-circle me-2"></i>
          <strong class="me-auto">{{ 'CHANGE_PASSWORD.TOAST_TITLE' | translate }}</strong>
          <small>{{ 'CHANGE_PASSWORD.TOAST_TIME' | translate }}</small>
          <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
          {{ toastMessage }}
        </div>
      </div>
    </div>
  </form>
</div>
