<div class="container orders">

  <!-- Ø¨Ø­Ø« ÙˆÙÙ„ØªØ±Ø© -->
  <div class="row mb-3 g-2 d-flex">
    <div class="col-md-6 d-flex justify-content-center">
      <input
        type="text"
        [(ngModel)]="searchQuery"
        (ngModelChange)="applyFilters()"
        class="form-control w-100"
        placeholder="ğŸ” Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„"
      />
    </div>

    <div class="col-md-6">
      <select [(ngModel)]="selectedStatus" (change)="applyFilters()" class="form-select">
        <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø§Ù„Ø§Øª</option>
        <option value="AwaitingWorkerAcceptance">Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</option>
        <option value="Completed">ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°</option>
        <option value="Cancelled">ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡</option>
      </select>
    </div>
  </div>

  <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
  <div class="row row-cols-1 g-4">
    <div class="col" *ngFor="let order of filteredOrders">
      <div
        class="card shadow-sm border-start border-4"
        [ngClass]="{
          'border-warning': order.status === 'AwaitingWorkerAcceptance',
          'border-success': order.status === 'Completed',
          'border-danger': order.status === 'Cancelled'
        }"
      >
        <div class="card-body">
          <div class="d-flex justify-content-between mb-2">
            <h5 class="card-title mb-0">#{{ order.status }}</h5>
            <span class="badge fs-5"
              [ngClass]="{
                'bg-warning text-dark': order.status === 'AwaitingWorkerAcceptance',
                'bg-success': order.status === 'Completed',
                'bg-danger': order.status === 'Cancelled'
              }"
            >
              {{
                order.status === 'AwaitingWorkerAcceptance'
                  ? 'Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°'
                  : order.status === 'Completed'
                  ? 'ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°'
                  : 'ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡'
              }}
            </span>
          </div>

          <div class="d-flex justify-content-between align-items-end">
            <div>
              <p class="mb-1">ğŸ‘¤ {{ order.customerName }}</p>
              <p class="mb-1">ğŸ§° {{ order.workerName }}</p>
              <p class="mb-1">ğŸ“… {{ order.createdAt | date: 'short' }}</p>
              <p class="mb-0">ğŸ’° {{ order.totalAmount }} Ø¬.Ù…</p>
            </div>
            <div>
              <button (click)="goToChat(order)" class="pr-sec-btn">chat</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="filteredOrders.length === 0" class="alert alert-info mt-4 text-center">
      Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø©
    </div>
  </div>

  <!-- Pagination -->
  <nav *ngIf="totalPages>1" class="d-flex justify-content-center mt-4">
    <ul class="pagination">
      <li class="page-item" [class.disabled]="pageIndex === 1">
        <button class="page-link" (click)="goToPage(pageIndex - 1)">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
      </li>
      <li class="page-item disabled">
        <span class="page-link">ØµÙØ­Ø© {{ pageIndex }} Ù…Ù† {{ totalPages }}</span>
      </li>
      <li class="page-item" [class.disabled]="pageIndex === totalPages">
        <button class="page-link" (click)="goToPage(pageIndex + 1)">Ø§Ù„ØªØ§Ù„ÙŠ</button>
      </li>
    </ul>
  </nav>

</div>
